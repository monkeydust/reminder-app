<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamlined Feel-Like Sparkline</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .weather-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
        }

        .weather-box {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #e0e6ff;
            text-align: center;
        }

        .temperature {
            font-size: 48px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .condition {
            color: #666;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .feels-like {
            color: #888;
            font-size: 14px;
            margin-bottom: 12px;
        }

        /* Ensemble Range (existing feature) */
        .ensemble-range {
            color: #999;
            font-size: 12px;
            margin-bottom: 8px;
        }

        /* Streamlined Sparkline */
        .weather-sparkline {
            margin: 8px auto 0;
            text-align: center;
        }

        .feels-sparkline {
            opacity: 0.8;
        }

        .sparkline-dot {
            r: 1.5;
            opacity: 0.7;
            cursor: pointer;
        }

        .sparkline-dot:hover {
            r: 2;
            opacity: 1;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .demo-box {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid;
        }

        .getting-hotter {
            border-color: #FF6B6B;
            background: rgba(255, 107, 107, 0.1);
        }

        .getting-cooler {
            border-color: #45AAF2;
            background: rgba(69, 170, 242, 0.1);
        }

        .demo-title {
            font-weight: 600;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="weather-container">
        <h2 style="text-align: center; color: #333; margin-bottom: 30px;">üå°Ô∏è Streamlined Sparkline Demo</h2>
        
        <div class="weather-box">
            <div class="temperature">23¬∞C</div>
            <div class="condition">Partly Cloudy</div>
            <div class="feels-like">Feels like 25¬∞C</div>
            
            <!-- Existing ensemble range feature -->
            <div class="ensemble-range">Ensemble Range: 27¬∞ - 30¬∞</div>
            
            <!-- NEW: Streamlined sparkline below ensemble range -->
            <div class="weather-sparkline">
                <svg class="feels-sparkline" viewBox="0 0 80 12" style="width: 80px; height: 12px;">
                    <path id="current-sparkline" stroke-width="1.5" fill="none" stroke-linecap="round"></path>
                    <g id="current-dots"></g>
                </svg>
            </div>
        </div>

        <!-- Comparison of different trend scenarios -->
        <div class="comparison">
            <div class="demo-box getting-hotter">
                <div class="demo-title">Getting Much Hotter</div>
                <div style="margin: 8px 0;">18¬∞C ‚Üí 32¬∞C (+14¬∞)</div>
                <svg class="feels-sparkline" viewBox="0 0 80 12" style="width: 80px; height: 12px;">
                    <path id="hot-sparkline" stroke-width="1.5" fill="none" stroke-linecap="round"></path>
                    <g id="hot-dots"></g>
                </svg>
            </div>
            
            <div class="demo-box getting-cooler">
                <div class="demo-title">Getting Much Cooler</div>
                <div style="margin: 8px 0;">28¬∞C ‚Üí 12¬∞C (-16¬∞)</div>
                <svg class="feels-sparkline" viewBox="0 0 80 12" style="width: 80px; height: 12px;">
                    <path id="cold-sparkline" stroke-width="1.5" fill="none" stroke-linecap="round"></path>
                    <g id="cold-dots"></g>
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Real MET API data (feel-like averages per day)
        const realData = [
            24.6, // Today avg: (29.5 + 19.6) / 2
            20.4, // Fri avg: (24.4 + 16.4) / 2
            18.0, // Sat avg: (22.9 + 13.1) / 2
            19.7, // Sun avg: (23.5 + 15.8) / 2  
            20.4  // Mon avg: (24.6 + 16.1) / 2
        ];

        // Demo scenarios
        const hotTrend = [18, 22, 26, 29, 32]; // Getting much hotter
        const coldTrend = [28, 24, 19, 15, 12]; // Getting much cooler

        function calculateTrendColor(data) {
            const firstTemp = data[0];
            const lastTemp = data[data.length - 1];
            const change = lastTemp - firstTemp;
            
            if (change > 6) {
                // Much hotter: Red gradient
                return {
                    stroke: '#FF6B6B',
                    gradient: 'linear-gradient(90deg, #FFE5E5, #FF6B6B)'
                };
            } else if (change < -6) {
                // Much cooler: Blue gradient  
                return {
                    stroke: '#45AAF2',
                    gradient: 'linear-gradient(90deg, #E5F3FF, #45AAF2)'
                };
            } else {
                // Mild change: Neutral green
                return {
                    stroke: '#26DE81',
                    gradient: 'linear-gradient(90deg, #E8F8F0, #26DE81)'
                };
            }
        }

        function createSparkline(data, pathId, dotsId) {
            const pathElement = document.getElementById(pathId);
            const dotsContainer = document.getElementById(dotsId);
            
            if (!pathElement || !dotsContainer) return;
            
            const minTemp = Math.min(...data);
            const maxTemp = Math.max(...data);
            const range = maxTemp - minTemp || 1; // Avoid division by zero
            
            // SVG dimensions
            const width = 80;
            const height = 12;
            const padding = 4;
            const chartWidth = width - (padding * 2);
            const chartHeight = height - (padding * 2);
            
            // Create path
            let pathData = '';
            const points = [];
            
            data.forEach((temp, index) => {
                const x = padding + (index * (chartWidth / (data.length - 1)));
                const y = padding + chartHeight - ((temp - minTemp) / range) * chartHeight;
                
                points.push({ x, y, temp });
                
                if (index === 0) {
                    pathData += `M ${x} ${y}`;
                } else {
                    pathData += ` L ${x} ${y}`;
                }
            });
            
            // Apply path and color
            pathElement.setAttribute('d', pathData);
            const colors = calculateTrendColor(data);
            pathElement.style.stroke = colors.stroke;
            
            // Create dots (no labels, just interactive dots)
            dotsContainer.innerHTML = '';
            points.forEach((point, index) => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', point.x);
                circle.setAttribute('cy', point.y);
                circle.setAttribute('r', 1.5);
                circle.setAttribute('fill', colors.stroke);
                circle.classList.add('sparkline-dot');
                
                // Simple hover interaction (no labels)
                circle.addEventListener('mouseenter', (e) => {
                    circle.setAttribute('r', 2);
                    circle.style.opacity = '1';
                });
                
                circle.addEventListener('mouseleave', () => {
                    circle.setAttribute('r', 1.5);
                    circle.style.opacity = '0.7';
                });
                
                dotsContainer.appendChild(circle);
            });
        }

        // Initialize all sparklines
        document.addEventListener('DOMContentLoaded', () => {
            createSparkline(realData, 'current-sparkline', 'current-dots');
            createSparkline(hotTrend, 'hot-sparkline', 'hot-dots');
            createSparkline(coldTrend, 'cold-sparkline', 'cold-dots');
        });
    </script>
</body>
</html>